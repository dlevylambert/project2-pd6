<!DOCTYPE html>

{% extends 'homepage.html' %}

{% block head %}
{{ super() }}
<style type="text/css">
  h1{font-family: "Pacifico"; font-size: 36; font-color: navy;}
  p{font-family: "Comic Sans MS"; font-size: 18; }
</style>
{% endblock head %}


{% block body %}

<form action="" method="POST">

{% if searchGenre %}
<h1>These are the results of your search for the genre "{{searchGenre}}": </h1>
{% elif searchWord and searchResult %}
<h1>These are the results of your search for "{{searchWord}}": </h1>
{% elif searchLatest %}
<h1>These are the results of your search for "{{searchLatest}}":</h1>
{% elif searchPlaying %}
<h1> These are the results of your search for "{{searchPlaying}}":</h1>
{% elif searchUpcoming %}
<h1> These are the results of your search for "{{searchUpcoming}}":</h1>
{% elif searchPopular %}
<h1> These are the results of your search for "{{searchPopular}}":</h1>
{% endif %}

<select name="movielist" id="mlist">
    {% if searchLatest %} 
    <option id="{{searchResult['ids']}}">{{ searchResult['titles']}}
    </option> 
    {% endif %}
    
    {% if not searchLatest %}
    {% for i in range (searchResult['ids'] | length) %}
        <option id = {{ searchResult['ids'][i] }} >{{ searchResult['titles'][i]+" "+searchResult['dates'][i] }}</option>
    {% endfor %}
    {% endif %}
</select>

<input type="submit" name="button" id="go" value="Go"></input>
<br><br>
<input type="submit" name="button" id="back" value="back"></input>
</form>

<div id="results">
  <ul>
    <li id="temp">Blah</li>
  </ul>
</div>

<script>

$(document).ready(function(){
    $('#temp').click( function() {
        movie_id = $('#mlist option:selected').attr('id');
        loadSummary(movie_id);
    });
});

function loadSummary(movie_id){
    $.getJSON("/get_info", {movie_id: movie_id}, function (data) {
        console.log(data);
        for (var d in data) {
            $('#results ul').append('<li><b>' + d + '</b>' + '  ' + data[d]  + '<\li>');
        }
    });
}

</script>

{% endblock body %}

